
\documentclass{standalone}
\usepackage{siunitx}
% \usepackage{tikz}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
%\usepackage{verbatim}
\usepackage{tikz}
\usepackage{helvet,etoolbox}
%\usepackage{sansmath}
\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{1pt}
\usetikzlibrary{patterns}
\usetikzlibrary{pgfplots.statistics}

\pgfplotsset{compat=newest}

%\usepackage{fontspec}
%\setmainfont[
%BoldFont={Arial Bold},
%ItalicFont={Arial Italic},
%BoldItalicFont={Arial Bold Italic}
%]{Arial}

%\AtBeginEnvironment{tikzpicture}{\sansmath}
%\AtEndEnvironment{tikzpicture}{\unsansmath}

% # user-study-sync-overhead-context-tx-v2.txt
%\pgfplotstableread{
%0   0
%1000   0.1
%5000   0.8
%10000   0.95
%20000   1
%}{\fakedata}

\makeatletter
\pgfplotsset{
my filter/.style args={every#1between#2and#3}{%
/pgfplots/x filter/.append code={%
\ifnum\coordindex<#2%
  % Nothing
\else% Did we pass #3?
  \ifnum\coordindex>#3%
    %Nothing
  \else% Ok filter is on, don't disturb \pgfmathresult for convenience
    \pgfmathsetmacro\temp{int(mod(\coordindex,#1))}%
    \ifnum0=\temp\relax% Are we on the nth point?
      % Yes do nothing let it pass
    \else% discard it
      \let\pgfmathresult\pgfutil@empty
    \fi%
  \fi%
\fi%
}}}
\makeatother



\pgfplotsset{
    compat=newest,
    legend image code/.code={
        \draw[mark repeat=2,mark phase=2]
        plot coordinates {
            (0cm,0cm)
            (0.3cm,0cm)        %% default is (0.3cm,0cm)
            (0.6cm,0cm)         %% default is (0.6cm,0cm)
        };%
    }
}

\makeatletter
\pgfplotsset{
	boxplot prepared from table/.code={
		\def\tikz@plot@handler{\pgfplotsplothandlerboxplotprepared}%
		\pgfplotsset{
			/pgfplots/boxplot prepared from table/.cd,
			#1,
		}
	},
	/pgfplots/boxplot prepared from table/.cd,
	table/.code={\pgfplotstablecopy{#1}\to\boxplot@datatable},
	row/.initial=0,
	make style readable from table/.style={
		#1/.code={
			\pgfplotstablegetelem{\pgfkeysvalueof{/pgfplots/boxplot prepared from table/row}}{##1}\of\boxplot@datatable
			\pgfplotsset{boxplot/#1/.expand once={\pgfplotsretval}}
		}
	},
	make style readable from table=lower whisker,
	make style readable from table=upper whisker,
	make style readable from table=lower quartile,
	make style readable from table=upper quartile,
	make style readable from table=median,
	make style readable from table=lower notch,
	make style readable from table=upper notch,
}
\makeatother

%\definecolor{myblue}{HTML}{0070C0}
%\definecolor{myred}{HTML}{C00000}
%\definecolor{mypurple}{HTML}{7030A0}
%\definecolor{mygreen}{HTML}{00B050}

\definecolor{myred}{HTML}{C00000}
\definecolor{mypurple}{HTML}{7030A0}
\definecolor{myblue}{HTML}{0070C0}
\definecolor{myblue2}{HTML}{0431FF}
\definecolor{myblue0}{HTML}{0000FF}
\definecolor{mygreen}{HTML}{00B050}
\definecolor{mygray}{HTML}{A6A6A6}


% \documentclass{standalone}
\usepackage{pgfplots}
% Nice color sets, see see http://colorbrewer2.org/	
\usepgfplotslibrary{colorbrewer}
% initialize Set1-4 from colorbrewer (we're comparing 4 classes),
\pgfplotsset{compat = 1.15, cycle list/Set1-8} 
% Tikz is loaded automatically by pgfplots
\usetikzlibrary{pgfplots.statistics, pgfplots.colorbrewer} 
% provides \pgfplotstabletranspose
\usepackage{pgfplotstable}
\usepackage{filecontents}

\begin{document}

%\begin{tikzpicture}[font=\sffamily]
\begin{tikzpicture}
	
\begin{axis}[
    %ymode = log,
    ybar,
    %reverse legend,
    %xbar=2*\pgflinewidth,
    ymax    = 1,
    ymin    = 0,
    xmax    = 5.5,%12.5,
    xmin    = 0.5,
    width   =  10 cm,
    height  =  3cm,
    scale only axis = true,
    xtick align = inside,
    tick label style={/pgf/number format/assume math mode=true},
    xtick = {1,2,3,4,5},
    xticklabels = {PV1, PV2, PV3, PV4, PV5},
    ytick = {0, 0.25, 0.5, 0.75, 1}, 
    yticklabels = {0, 25\%, 50\%, 75\%,100\%},  
    ymajorgrids=true,
    enlarge x limits=0,2,
    %enlarge x limits=0,
    bar width=4.5pt,
    %boxplot/variable width,
    %boxplot/box extend=0.3,
    %xtick style={draw=none},
    %yticklabels = {0m, 30m, 60m, 90m, 120m},
    % % xticklabel pos=right,
    % xtick pos = left,
    % ytick pos = left,
    % % yticklabel pos=right,
    % % enlargelimits=0.15,
   % xlabel={Location},
     xlabel={},
    ylabel={5G ON-OFF Loop (\%)},
    %xlabel={BW \small{(MHz)}},
    xlabel style={
        %font=\small,
        % at={(current axis.north west)},
        % rotate=-90,
       %xshift= -10pt,
        yshift = 5pt,
    },
    ylabel style={
       % font=\small,
        % at={(current axis.north west)},
        % rotate=-90,
        %text width=2.8cm,
        align=center,
        xshift=0pt,
        yshift = -7 pt,
    },
    xticklabel style = {
    	%font=\normalsize,
	yshift =  2 pt,
        xshift =  0 pt,
    },
    yticklabel style = {
    %font=\normalsize,
   	yshift =  0 pt,
        xshift =  3 pt,
    },
legend image code/.code={
        \draw [#1] (0cm,-0.1cm) rectangle (0.3cm,0.15cm); },
	legend style={
	at={(1,1.15)},
	%font    = \small,
	fill    = none,
	draw    = none,
	anchor  = north east,
	column sep=0cm,
	row sep= 0cm,
	%row sep= 0cm,
	legend cell align   = left,
	legend columns      = 7,
	nodes={scale=1},
},
    ]

\addplot+[
line width=0.9pt,
myred,
fill=myred,
%bar width= 3pt
]
table[
x = index,
y = op12r_old,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};

\addplot+[
line width=0.9pt,
myred,
fill=myred,%myred,
fill opacity=0.75,
postaction={pattern=crosshatch, opacity=0.5},
%bar width= 3pt
]
table[
x = index,
y = op12r_new,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};

%\addplot+[
%line width=0.9pt,
%myred,
%    fill=myred,
%    fill opacity=0.5,
%    postaction={pattern=north east lines, opacity=0.5},
%bar width= 3pt
%]
%table[
%x = index,
%y = N1E2,
%col sep=comma,
%] {type_channel_ratio_breakdown_a.csv};
%%\addlegendentry{\texttt{Legacy++}}

\addplot+[
    line width=0.9pt,
    %myblack,
    %myred,
    myred!75,
    fill=myred,
    fill opacity=0.1,
    %postaction={pattern=north east lines, opacity=0.1},
   %bar width= 3pt
]
table[
x = index,
y = op13,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};

\addplot+[
    line width=0.9pt,
    %myblack,
    %myred,
    myred!75,
    fill=myred,
    fill opacity=0.1,
    postaction={pattern=horizontal lines, opacity=0.5},
    %postaction={pattern=north west lines, opacity=0.5}
   % postaction={pattern=north west lines, opacity=0.5},
    %bar width= 3pt
]
table[
x = index,
y = op13r,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};

\addplot+[
line width=0.9pt,
    myred!75,
    fill=white,
    fill opacity=0.1,
    postaction={pattern=crosshatch, opacity=0.5},
    %bar width= 3pt
]
table[
x = index,
y = op10pro,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};

\addplot+[
line width=0.9pt,
    black,
    %fill=myred,
   fill opacity=0.25,
   %postaction={pattern=north west lines, opacity=0.5},
   %bar width= 3pt
]
table[
x = index,
y = s23,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};



\addplot+[
line width=0.9pt,
black,
fill=white,
fill opacity=0.25,
%bar width= 3pt
]
table[
x = index,
y = pixel5,
col sep=comma,
] {onoff_location_stats_v_all_static_phone_models_short.csv};

\legend{12R(Old), 12R(New), 13, 13R, 10Pro, S23,  P5}

%\draw[myred,densely dashed,->,line width=0.9pt] (axis cs:3,0.3) -- (axis cs: 3,0.02);
%\node[center, text=myred, rotate = 0] at (axis cs: 3,0.58) {\small \bf Does not use};
%\node[center, text=myred, rotate = 0] at (axis cs: 3,0.42) {\small \bf  5G for AT\&T};

%\node[center, text=black, rotate=0] at (axis cs: 3.5,0.8) {\bf 4G};
%\node[center, text=black, rotate = 0] at (axis cs:7.5,0.8) {\bf 5G};

%\draw[mark=none, thin, dashed, gray] (axis cs:6.5,0) -- (axis cs:6.5,1.2);

%\node[text=black] at (axis cs:2,260) {\bf 1};
%\node[text=black] at (axis cs:6,260) {\bf 2};
%\node[text=black] at (axis cs:10,260) {\bf 3};
%\node[text=black] at (axis cs:14,260) {\bf 4};
%\node[text=black] at (axis cs:18,260) {\bf 5};
%\node[text=black] at (axis cs:22,260) {\bf 6};
%\node[text=black] at (axis cs:26,260) {\bf 7};
%\node[text=black] at (axis cs:30,260) {\bf 8};
%\node[text=black] at (axis cs:34,260) {\bf 9};
%\node[text=black] at (axis cs:38,260) {\bf 10};
%\node[text=black] at (axis cs:42,260) {\bf 11};
%\node[text=black] at (axis cs:46,260) {\bf 12};
%\node[text=black] at (axis cs:50,260) {\bf 13};

%\filldraw [draw=myred, fill = myred,fill opacity=0.1, thick] (1,-66) rectangle (2.3,-62);
%\node[,right] at (axis cs: 2.3,-64) {\normalsize Failure};
%
%\filldraw [draw=myblue, fill = myblue,fill opacity=0.1, thick] (1,-74) rectangle (2.3,-70);
%\node[,right] at (axis cs: 2.3,-72) {\normalsize Normal};

%\legend{\texttt{Failure}, \texttt{Normal}}

%\addplot+[mark=none, densely dashed,gray,line width=0.5pt] coordinates {(3,-150) (3,0)};
%\addplot+[mark=none, densely dashed,gray,line width=0.5pt] coordinates {(6,-150) (6,0)};

%\legend{all (no RSRP limit), RSRP $\ge$ -120dBm, RSRP $\ge$ -100dBm}
%\legend{All, $\ge$-120dBm, $\ge$-100dBm}
%\legend{\texttt{5GAIR}, \texttt{Legacy}}
%\legend{\texttt{5GAIR}, \texttt{Legacy++}}

%\filldraw [draw=myred, fill = myred,fill opacity=0.1, thick] (1.4,105) rectangle (2,115);
%\node[,right] at (axis cs: 2,110) {\normalsize U};
%
%\filldraw [draw=myblue, fill = myblue,fill opacity=0.1, thick] (3.4,105) rectangle (4,115);
%\node[,right] at (axis cs: 4,110) {\normalsize Others};

%\addplot[mark=dash, gray] coordinates {(0,15) (2,15)} ;
%\addplot[mark=dash, gray] coordinates {(0,45) (2,45)};
%\addplot[mark=dash, gray] coordinates {(0,75) (2,75)};
%\addplot[mark=dash, gray] coordinates {(0,105) (2,105)};

%\node[font=\small, left]at (axis cs: 1.03,0) {\textbf{0m}};
%\node[font=\small, left]at (axis cs: 1.03,30) {\textbf{30m}};
%\node[font=\small, left]at (axis cs: 1.03,60) {\textbf{60m}};
%\node[font=\small, left]at (axis cs: 1.03,90) {\textbf{90m}};
%\node[font=\small, left]at (axis cs: 1.03,120) {\textbf{120m}};

%\addplot+[mark=none, densely dashed,gray,line width=0.2pt] coordinates {(0,300) (4,300)};
%\node[,right] at (axis cs: 1.25, 400) {\small 300 Mbps};

% replot median in RED
%\addplot+[mark=none, very thick,solid,red] coordinates {(0.75,13.3) (1.25,13.3)};
%\addplot+[mark=none, very thick,solid,red] coordinates {(1.75,23.9) (2.25,23.9)};
%\addplot+[mark=none, very thick,solid,blue] coordinates {(2.75,165.1) (3.25,165.1)};


%\draw[gray,densely dashed,->,line width=0.2pt] (axis cs:1.25,13) -- (axis cs: 1.5,1.5);
%\node[,right] at (axis cs: 1.25,1.5) {\small 13.0};
%\draw[gray,densely dashed,->,line width=0.2pt] (axis cs:2.75,21.8) -- (axis cs: 3,6);
%\node[,right] at (axis cs: 2,6) {\small 21.8};
%\node[,right] at (axis cs: 1,300) {\small 164.5};

%\addplot+[mark=none, densely dashed,red,line width=0.2pt] coordinates {(0,13.3) (1.25,13.3)};
%\addplot+[mark=none, densely dashed,red,line width=0.2pt] coordinates {(2,23.9) (2.75,23.9)};
%\addplot+[mark=none, densely dashed,blue,line width=0.2pt] coordinates {(2.25,165.1) (3.5,165.1)};
%
%\draw[myblack,densely dashed,line width=0.2pt] (axis cs:1.25,13.3) -- (axis cs: 1.5,3);
%\node[red,right] at (axis cs: 1,2) {\small 13.3};
%\draw[red,densely dashed,line width=0.2pt] (axis cs:2.75,23.9) -- (axis cs: 3,7);
%\node[red,right] at (axis cs: 2,6) {\small 23.9};
%\draw[blue,densely dashed,line width=0.2pt] (axis cs:2.25,165.1) -- (axis cs: 1.5,300);
%\node[blue,right] at (axis cs: 1, 340) {\small 165.1};

%13
%21.8
%164.5

%\addplot+ [onlymarks,draw=black,mark=*,mark size=0.5pt,mark options={fill=black,},
%]table[x=x,y=y] \outlierdatatable;
%coordinates { 
%	(1,0)
%	(1, 100)
%	(2, 100)
%	(2, 100)
%};


\end{axis}

%\begin{axis}[
%    %ymode = log,
%    %xbar=2*\pgflinewidth,
%    xmax    = 1,
%    xmin    = 0,
%    ymax    = 120,%12.5,
%    ymin    = 0,
%    width   =  2.5 cm,
%    height  =  3.5 cm,
%    scale only axis = true,
%    xtick align = inside,
%    tick label style={/pgf/number format/assume math mode=true},
%    ytick = {},
%    yticklabels = {},
%    xtick = {},
%    xticklabels = {},
%    enlarge y limits=0.25,
%    bar width=4pt,
%    ytick style={draw=none},
%    xtick style={draw=none},
%    %yticklabels = {0m, 30m, 60m, 90m, 120m},
%    % % xticklabel pos=right,
%    % xtick pos = left,
%    % ytick pos = left,
%    % % yticklabel pos=right,
%    % % enlargelimits=0.15,
%    ylabel={},
%    xlabel={},
%    %xlabel={BW \small{(MHz)}},
%    xlabel style={
%        %font=\small,
%        % at={(current axis.north west)},
%        % rotate=-90,
%       % xshift= -10pt,
%        yshift = 5pt,
%    },
%    ylabel style={
%        %font=\small,
%        % at={(current axis.north west)},
%        % rotate=-90,
%        %text width=2.8cm,
%        align=center,
%        xshift= 0pt,
%        yshift = -8 pt,
%    },
%    yticklabel style={
%        %font=\small,
%       % align=center,
%        rotate=-90,
%        xshift=  0mm,
%        yshift =  2mm,
%    },
%%  yticklabel style={
%%        %font=\small,
%%        align=center,
%%        xshift= 8 pt,
%%        yshift = 0 pt,
%%    },
%  xticklabel style={
%        %font=\small,
%        align=center,
%        xshift= 0pt,
%        yshift = 3pt,
%    },
%    ]
%    
%\addplot[mark=none, solid,black,line width=0.5pt] coordinates {(0,30) (100,30)} ;
%\addplot[mark=none, solid,black,line width=0.5pt] coordinates {(0,90) (100,90)};
%
%\end{axis}

\end{tikzpicture}

\end{document}

